<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <title>filter sort pagination</title>

  <link rel="stylesheet" href="sandbox.css" />
  <style>
  #container { width: 100%; }
  </style>
</head>
<body>

  <h1>filter sort pagination</h1>

<div id="options">
  <h2>Filter</h2>
  <div class="option-set" data-isotope-key="filter">
    <button data-isotope-value="*">show all</button>
    <button data-isotope-value=".metal">metal</button>
    <button data-isotope-value=".post-transition">post-transition</button>
    <button data-isotope-value="number-greater-than-50">number > 50</button>
  </div>
  <h2>Sort</h2>
  <div class="option-set" data-isotope-key="sortBy">
    <button data-isotope-value="original-order">original-order</button>
    <button data-isotope-value="number">number</button>
    <button data-isotope-value="name">name</button>
    <button data-isotope-value="symbol">symbol</button>
    <button data-isotope-value="weight">weight</button>
    <button data-isotope-value="category">category</button>
  </div>
  <h2>Pagination</h2>
  <div class="option-set" data-isotope-key="page" id="paginationControl">
  </div>
</div>

<div id="container">
  
  <div class="element transition metal   " data-symbol="Hg" data-category="transition">
    <p class="number">80</p>
    <h3 class="symbol">Hg</h3>
    <h2 class="name">Mercury</h2>
    <p class="weight">200.59</p>
  </div>

  <div class="element metalloid   " data-symbol="Te" data-category="metalloid">
    <p class="number">52</p>
    <h3 class="symbol">Te</h3>
    <h2 class="name">Tellurium</h2>
    <p class="weight">127.6</p>
  </div>

  <div class="element post-transition metal   " data-symbol="Bi" data-category="post-transition">
    <p class="number">83</p>
    <h3 class="symbol">Bi</h3>
    <h2 class="name">Bismuth</h2>
    <p class="weight">208.9804</p>
  </div>

  <div class="element transition metal   " data-symbol="Cd" data-category="transition">
    <p class="number">48</p>
    <h3 class="symbol">Cd</h3>
    <h2 class="name">Cadmium</h2>
    <p class="weight">112.411</p>
  </div>

  <div class="element alkaline-earth metal   " data-symbol="Ca" data-category="alkaline-earth">
    <p class="number">20</p>
    <h3 class="symbol">Ca</h3>
    <h2 class="name">Calcium</h2>
    <p class="weight">40.078</p>
  </div>

  <div class="element transition metal   " data-symbol="Re" data-category="transition">
    <p class="number">75</p>
    <h3 class="symbol">Re</h3>
    <h2 class="name">Rhenium</h2>
    <p class="weight">186.207</p>
  </div>

  <div class="element post-transition metal   " data-symbol="Tl" data-category="post-transition">
    <p class="number">81</p>
    <h3 class="symbol">Tl</h3>
    <h2 class="name">Thallium</h2>
    <p class="weight">204.3833</p>
  </div>

  <div class="element metalloid   " data-symbol="Sb" data-category="metalloid">
    <p class="number">51</p>
    <h3 class="symbol">Sb</h3>
    <h2 class="name">Antimony</h2>
    <p class="weight">121.76</p>
  </div>

  <div class="element transition metal   " data-symbol="Co" data-category="transition">
    <p class="number">27</p>
    <h3 class="symbol">Co</h3>
    <h2 class="name">Cobalt</h2>
    <p class="weight">58.933195</p>
  </div>

  <div class="element lanthanoid metal inner-transition   " data-symbol="Lu" data-category="lanthanoid">
    <p class="number">71</p>
    <h3 class="symbol">Lu</h3>
    <h2 class="name">Lutetium</h2>
    <p class="weight">174.9668</p>
  </div>

  <div class="element noble-gas nonmetal   " data-symbol="Ar" data-category="noble-gas">
    <p class="number">18</p>
    <h3 class="symbol">Ar</h3>
    <h2 class="name">Argon</h2>
    <p class="weight">39.948</p>
  </div>

  <div class="element alkali metal   " data-symbol="Rb" data-category="alkali">
    <p class="number">37</p>
    <h3 class="symbol">Rb</h3>
    <h2 class="name">Rubidium</h2>
    <p class="weight">85.4678</p>
  </div>

  <div class="element other nonmetal   " data-symbol="N" data-category="other">
    <p class="number">7</p>
    <h3 class="symbol">N</h3>
    <h2 class="name">Nitrogen</h2>
    <p class="weight">14.0067</p>
  </div>

  <div class="element actinoid metal inner-transition   " data-symbol="Np" data-category="actinoid">
    <p class="number">93</p>
    <h3 class="symbol">Np</h3>
    <h2 class="name">Neptunium</h2>
    <p class="weight">(237)</p>
  </div>

  <div class="element actinoid metal inner-transition   " data-symbol="Ac" data-category="actinoid">
    <p class="number">89</p>
    <h3 class="symbol">Ac</h3>
    <h2 class="name">Actinium</h2>
    <p class="weight">(227)</p>
  </div>
  <div class="element transition metal " data-category="transition">
    <h5 class="name">Gold</h5>
    <p class="symbol">Au</p>
    <p class="number">79</p>
    <p class="weight">196.967</p>
  </div>
  <div class="element alkali metal " data-category="alkali">
    <h5 class="name">Potassium</h5>
    <p class="symbol">K</p>
    <p class="number">19</p>
    <p class="weight">39.0983</p>
  </div>
  <div class="element alkali metal " data-category="alkali">
    <h5 class="name">Sodium</h5>
    <p class="symbol">Na</p>
    <p class="number">11</p>
    <p class="weight">22.99</p>
  </div>
  <div class="element transition metal " data-category="transition">
    <h5 class="name">Cadmium</h5>
    <p class="symbol">Cd</p>
    <p class="number">48</p>
    <p class="weight">112.411</p>
  </div>
  <div class="element alkaline-earth metal " data-category="alkaline-earth">
    <h5 class="name">Calcium</h5>
    <p class="symbol">Ca</p>
    <p class="number">20</p>
    <p class="weight">40.078</p>
  </div>
  <div class="element transition metal " data-category="transition">
    <h5 class="name">Rhenium</h5>
    <p class="symbol">Re</p>
    <p class="number">75</p>
    <p class="weight">186.207</p>
  </div>
  <div class="element post-transition metal " data-category="post-transition">
    <h5 class="name">Thallium</h5>
    <p class="symbol">Tl</p>
    <p class="number">81</p>
    <p class="weight">204.383</p>
  </div>
  <div class="element metalloid " data-category="metalloid">
    <h5 class="name">Antimony</h5>
    <p class="symbol">Sb</p>
    <p class="number">51</p>
    <p class="weight">121.76</p>
  </div>
  <div class="element transition metal " data-category="transition">
    <h5 class="name">Cobalt</h5>
    <p class="symbol">Co</p>
    <p class="number">27</p>
    <p class="weight">58.933</p>
  </div>
  <div class="element lanthanoid metal inner-transition " data-category="lanthanoid">
    <h5 class="name">Ytterbium</h5>
    <p class="symbol">Yb</p>
    <p class="number">70</p>
    <p class="weight">173.054</p>
  </div>
  <div class="element noble-gas nonmetal " data-category="noble-gas">
    <h5 class="name">Argon</h5>
    <p class="symbol">Ar</p>
    <p class="number">18</p>
    <p class="weight">39.948</p>
  </div>
  <div class="element diatomic nonmetal " data-category="diatomic">
    <h5 class="name">Nitrogen</h5>
    <p class="symbol">N</p>
    <p class="number">7</p>
    <p class="weight">14.007</p>
  </div>
  <div class="element actinoid metal inner-transition " data-category="actinoid">
    <h5 class="name">Uranium</h5>
    <p class="symbol">U</p>
    <p class="number">92</p>
    <p class="weight">238.029</p>
  </div>
  <div class="element actinoid metal inner-transition " data-category="actinoid">
    <h5 class="name">Plutonium</h5>
    <p class="symbol">Pu</p>
    <p class="number">94</p>
    <p class="weight">(244)</p>
  </div>
</div>

<script src="../bower_components/eventEmitter/EventEmitter.js"></script>
<script src="../bower_components/eventie/eventie.js"></script>
<script src="../bower_components/doc-ready/doc-ready.js"></script>
<script src="../bower_components/get-style-property/get-style-property.js"></script>
<script src="../bower_components/get-size/get-size.js"></script>
<script src="../bower_components/jquery-bridget/jquery.bridget.js"></script>
<script src="../bower_components/matches-selector/matches-selector.js"></script>
<script src="../bower_components/fizzy-ui-utils/utils.js"></script>
<script src="../bower_components/outlayer/item.js"></script>
<script src="../bower_components/outlayer/outlayer.js"></script>

<script src="../js/item.js"></script>
<script src="../js/layout-mode.js"></script>
<script src="../js/isotope.js"></script>
<script src="../js/layout-modes/fit-rows.js"></script>
<script src="../js/layout-modes/vertical.js"></script>

<script src="../bower_components/isotope-cells-by-row/cells-by-row.js"></script>

<script>
docReady( function() {
  var container = document.querySelector('#container');
  var iso = window.iso = new Isotope( container, {
    layoutMode: 'fitRows',
    transitionDuration: '0.8s',
    cellsByRow: {
      columnWidth: 130,
      rowHeight: 140,
    },
    getSortData: {
      number: '.number parseInt',
      symbol: '.symbol',
      name: '.name',
      category: '[data-category]',
      weight: function( itemElem ) {
        // remove parenthesis
        return parseFloat( getText( itemElem.querySelector('.weight') ).replace( /[\(\)]/g, '') );
      }
    },
    pagination: true,
    perPageItems: 10,
    isInitLayout: false
  });

  var options = document.querySelector('#options');

  eventie.bind( options, 'click', function( event ) {
    if ( !matchesSelector( event.target, 'button' ) ) {
      return;
    }

    // var opt = {};
    var key = event.target.parentNode.getAttribute('data-isotope-key');
    var value = event.target.getAttribute('data-isotope-value');

    if ( key === 'filter' && value === 'number-greater-than-50' ) {
      value = function( elem ) {
        var numberText = getText( elem.querySelector('.number') );
        return parseInt( numberText, 10 ) > 40;
      };
    }
    // console.log( key, value );
    iso.options[ key ] = value;
    iso.arrange();
  });

  var paginationControl = document.getElementById('paginationControl');
  iso.on( 'paginationUpdate', function( currentPage, totalPage, items ) {
    paginationControl.innerText = '';
    paginationControl.textContent = '';
    var pageBtn;
    for ( var i = 0; i !== totalPage; i++ ) {
      pageBtn = document.createElement('button');
      pageBtn.innerText = i + 1;
      pageBtn.textContent = i + 1;
      pageBtn.setAttribute('data-isotope-value', i + 1);
      paginationControl.appendChild(pageBtn);
    }
  });

  iso.arrange();

  // iso.on( 'hideComplete', function( items ) {
  //   console.log( 'hideComplete', items );
  // })

  // iso.on( 'revealComplete', function( items ) {
  //   console.log( 'revealComplete', items );
  // })

  // iso.on( 'arrangeComplete', function( items ) {
  //   console.log( 'arrangeComplete', items.length );
  // });

});

function getText( elem ) {
  return elem.textContent || elem.innerText;
}

</script>

</body>
</html>
